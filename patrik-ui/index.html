<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="pure.css"> 
    <script defer src="alpine.js"></script>
    <script>
        function getAllActions() {
            return {
                selectedAction: null,
                actions: [],
                getData() {
                    fetch('http://127.0.0.1:9001/get-all-actions/', {method: 'GET', mode: 'cors'})
                        .then(response => response.json())
                        .then(data => {
                            this.actions = data; 
                            this.selectedAction = data[0]
                        });          
                }  
            }
        }
    </script>
</head>

<body>
    <!-- <div class="btn-group">
        <button onclick = "(() => fetch('/cmd/start'))()">START</button>
        <button onclick = "(() => fetch('/cmd/stop'))()">STOP</button>
        <button onclick = "(() => fetch('/cmd/greet'))()">GREET</button>
    </div> -->

    <div class="pure-g" x-data="getAllActions()" x-init="getData()">
        <div class="pure-u-1-3"></div>
        <div class="pure-u-1-3">
            <form class="pure-form">
                <fieldset>
                    <select x-model="selectedAction">
                        <template x-for="action in actions">
                            <option :value="action" x-text="action"></option>                                                                 
                        </template>
                    </select>
                    <button 
                        type="submit"
                        class="pure-button pure-button-primary"
                        @click="(() => fetch(`http://localhost:9001/cmd/${selectedAction}`))()">
                        Sign in
                    </button>
                </fieldset>
            </form>
            <a href="http://localhost:9001/get-all-actions/">TEST</a>
            <p>Selected: <span x-text="selectedAction"></span></p>

        </div>
    </div>
</body>
</html>