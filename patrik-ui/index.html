<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="/ui/pure.css"> 
    <script defer src="/ui/alpine.js"></script>
    <script>
        function getAllActions() {
            return {
                // selectedAction: null,
                actions: [],
                getData() {
                    fetch('/move/get-all-actions/')
                        .then(response => response.json())
                        .then(data => {
                            this.actions = data;
                            // if (this.actions.length == 0) {
                            //     this.actions = data; 
                            //     this.selectedAction = data[0]
                            // }
                        })
                        .catch(error => console.error(error));          
                }  
            }
        }
    </script>
</head>

<body>
    <!-- <div class="btn-group">
        <button onclick = "(() => fetch('/cmd/start'))()">START</button>
        <button onclick = "(() => fetch('/cmd/stop'))()">STOP</button>
        <button onclick = "(() => fetch('/cmd/greet'))()">GREET</button>
    </div> -->

    <!-- <div class="pure-g" x-data="getAllActions()" x-init="getData()"> -->
        <div class="pure-g">
        <div class="pure-u-1-3"></div>
        <div class="pure-u-1-3">
            <!-- <form class="pure-form" x-data="{ message: '' }"> -->
            <div class="pure-form"
                x-data="{ actions: [], currentAction: '' }"
                x-init="actions = await (await fetch('/move/get-all-actions')).json(); currentAction = actions[0]"
            >
                <fieldset>
                    <!-- <select x-model="selectedAction"> -->
                    <select x-model="currentAction">
                        <template x-for="action in actions">
                            <option :value="action" x-text="action"></option>                                                                 
                        </template>
                    </select>
                    <button 
                        class="pure-button pure-button-primary"
                        @click="await fetch(`/move/do_action/${currentAction}`)"
                    >
                        Sign in
                    </button>
                    <p>Selected: <span x-text="currentAction"></span></p>
                </fieldset>
            </div>
           

        </div>
    </div>
</body>
</html>